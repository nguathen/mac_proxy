#!/bin/bash
# MacProxy.app launcher script

# Tìm project root (thư mục chứa MacProxy.app)
APP_BUNDLE="$(cd "$(dirname "$0")/../.." && pwd)"
SCRIPT_DIR="$(dirname "$APP_BUNDLE")"

# Kiểm tra xem launch_app.sh có tồn tại không
if [ ! -f "$SCRIPT_DIR/launch_app.sh" ]; then
    # Nếu không tìm thấy, hiển thị thông báo lỗi
    osascript -e 'display dialog "Không tìm thấy launch_app.sh trong thư mục project. Vui lòng đảm bảo MacProxy.app nằm trong thư mục project root." buttons {"OK"} default button "OK" with icon stop'
    exit 1
fi

cd "$SCRIPT_DIR"

# Mở Terminal và chạy script
osascript <<EOF
tell application "Terminal"
    activate
    do script "cd '$SCRIPT_DIR' && ./launch_app.sh"
end tell
EOF
